<yuv-panel *ngIf="_task" class="task-details" [title]="header?.title" [description]="header?.description">

    <div class="actions" *ngIf="dueDate">{{'yuv.framework.process-list.column.dueDate.label'|translate}}<span
            class="dueDate" [ngClass]="{overDue: dueDate.overDue}">{{dueDate.date|localeDate}}</span></div>

    <yuv-responsive-tab-container *ngIf="(plugins ? (plugins | async) : []) as resolvedPlugins" #tabContainer
        class="content" [layoutOptionsKey]="_layoutOptionsKey" [pluginPanels]="[viewPanels, externalPanels]"
        [pluginPanelsOrder]="panelOrder">
        <ng-container *ngFor="let templateID of panelOrder" [ngTemplateOutlet]="this[templateID]"></ng-container>
        <!-- PLUGINS -->
        <p-tabPanel *ngFor="let config of resolvedPlugins" [id]="config.id" [header]="(config.label) | translate"
            [headerStyleClass]="config.id" class="{{config.id}}">
            <ng-template pTemplate="content">
                <yuv-plugin [config]="config" [parent]="this"></yuv-plugin>
            </ng-template>
        </p-tabPanel>

        <ng-container *ngTemplateOutlet="content"></ng-container>
    </yuv-responsive-tab-container>
</yuv-panel>

<!-- PANELS -->
<ng-template #taskTab>
    <p-tabPanel [id]="'taskTab'" [header]="'yuv.framework.task-details.tabs.task.title' | translate"
        [headerStyleClass]="'task'">
        <ng-template pTemplate="content">
            <yuv-task-details-task [task]="_task" (taskUpdated)="onTaskUpdated($event)"></yuv-task-details-task>
        </ng-template>
    </p-tabPanel>
</ng-template>

<ng-template #historyTab>
    <p-tabPanel [id]="'historyTab'" [header]="'yuv.framework.task-details.tabs.progress.title' | translate"
        [headerStyleClass]="'history'">
        <ng-template pTemplate="content">
            <yuv-task-details-history [processInstanceId]="_task?.processInstanceId"></yuv-task-details-history>
        </ng-template>
    </p-tabPanel>
</ng-template>

<ng-template #attachmentsTab>
    <p-tabPanel [id]="'attachmentsTab'" [header]="'yuv.framework.task-details.tabs.attachments.title' | translate"
        [headerStyleClass]="'attachments'">
        <ng-template pTemplate="content">
            <yuv-task-details-attachments [layoutOptionsKey]="_layoutOptionsKey" [task]="_task"
                (attachmentOpenExternal)="attachmentOpenExternal.emit($event)">
            </yuv-task-details-attachments>
        </ng-template>
    </p-tabPanel>
</ng-template>

<ng-template #content>
    <ng-content></ng-content>
</ng-template>