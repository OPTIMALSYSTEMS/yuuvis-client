<yuv-panel *ngIf="task" class="task-details" [title]="task.title" [description]="task.description">

    <yuv-responsive-tab-container *ngIf="(plugins ? (plugins | async) : []) as resolvedPlugins" #tabContainer
        class="content" [layoutOptionsKey]="layoutOptionsKey" [pluginPanels]="[viewPanels, externalPanels]"
        [pluginPanelsOrder]="panelOrder">
        <ng-container *ngFor="let templateID of panelOrder" [ngTemplateOutlet]="this[templateID]"></ng-container>
        <!-- PLUGINS -->
        <p-tabPanel *ngFor="let config of resolvedPlugins" [id]="config.id" [header]="(config.label) | translate"
            [headerStyleClass]="config.id" class="{{config.id}}">
            <ng-template pTemplate="content">
                <yuv-plugin [config]="config" [parent]="this"></yuv-plugin>
            </ng-template>
        </p-tabPanel>

        <ng-container *ngTemplateOutlet="content"></ng-container>
    </yuv-responsive-tab-container>
</yuv-panel>

<!-- PANELS -->
<ng-template #taskTab>
    <p-tabPanel [id]="'taskTab'" [header]="'yuv.framework.task-details.tabs.task.title' | translate"
        [headerStyleClass]="'task'">
        <ng-template pTemplate="content">
            <yuv-task-details-task [task]="task"></yuv-task-details-task>
        </ng-template>
    </p-tabPanel>
</ng-template>

<ng-template #historyTab>
    <p-tabPanel [id]="'historyTab'" [header]="'yuv.framework.task-details.tabs.history.title' | translate"
        [headerStyleClass]="'history'">
        <ng-template pTemplate="content">
            <yuv-task-details-history [processInstanceId]="task?.taskData.processInstanceId"></yuv-task-details-history>
        </ng-template>
    </p-tabPanel>
</ng-template>

<ng-template #attachmentsTab>
    <p-tabPanel [id]="'attachmentsTab'" [header]="'yuv.framework.task-details.tabs.attachments.title' | translate"
        [headerStyleClass]="'attachments'">
        <ng-template pTemplate="content">
            <yuv-task-details-attachments [objectIDs]="task?.attachments">
            </yuv-task-details-attachments>
        </ng-template>
    </p-tabPanel>
</ng-template>

<ng-template #content>
    <ng-content></ng-content>
</ng-template>