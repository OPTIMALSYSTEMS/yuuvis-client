<div class="task-description" *ngIf="taskDescription">
    {{taskDescription}}
</div>

<div class="task-data">
    <yuv-object-form *ngIf="formOptions" [formOptions]="formOptions" (statusChanged)="onFormStatusChanged($event)">
    </yuv-object-form>

    <div class="error" *ngIf="error">{{'yuv.framework.task-details-task.form.load.error'|translate}}</div>
</div>

<div class="actions" [ngClass]="{disabled: busy}">
    <div class="left" *ngIf="!claimable && task?.delegationState !== 'resolved'">
        <button class="secondary" (click)="getDelegationAssignee()">
            {{'yuv.framework.task-details-task.button.delegate'|translate}}</button>
    </div>
    <div class="right">
        <button (click)="resetForm()" *ngIf="formState?.dirty">
            {{'yuv.framework.task-details-task.button.reset'|translate}}</button>
        <button class="" (click)="update()" *ngIf="formOptions"
            [disabled]="error || !formState?.dirty || formState?.invalid">
            {{'yuv.framework.task-details-task.button.update'|translate}}</button>
        <ng-container *ngIf="claimable">
            <button *ngIf="!_task.assignee; else tplUnClaim" class="primary" (click)="claim(true)">
                {{'yuv.framework.task-details-task.button.claim'|translate}}
            </button>
            <ng-template #tplUnClaim>
                <button class="secondary" (click)="claim(false)">
                    {{'yuv.framework.task-details-task.button.unclaim'|translate}}
                </button>
            </ng-template>
        </ng-container>
        <button *ngIf="!claimable || _task.assignee" class="primary" (click)="confirm()">
            {{'yuv.framework.task-details-task.button.confirm'|translate}}
        </button>
    </div>
</div>

<ng-template #tplDelegationAssignee let-popover="popover">
    <yuv-task-delegate-picker [popover]="popover" (assigneePicked)="delegate($event)"></yuv-task-delegate-picker>
</ng-template>