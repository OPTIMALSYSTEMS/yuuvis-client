<div class="form-element" [formGroup]="element" *ngIf="element">
  <div class="form-field t-{{ formElementRef._eoFormElement.type }}" #formField
    [ngSwitch]="formElementRef._eoFormElement.type" [ngClass]="{ disabled: !!formElementRef._eoFormElement.readonly }">
    <!-- STRING -->
    <yuv-form-input *ngSwitchCase="'string'" [tag]="tag" [label]="formElementRef._eoFormElement.label" [isNull]="isNull"
      [skipToggle]="skipToggle || situation !== 'SEARCH'" (onToggleLabel)="labelToggled($event)"
      [required]="formElementRef._eoFormElement.required" [invalid]="formElementRef.invalid">
      <yuv-string
        *ngIf="!formElementRef._eoFormElement.reference && formElementRef._eoFormElement.classification !== 'selector'"
        [situation]="element._eoFormControlWrapper.situation"
        [formControlName]="element._eoFormControlWrapper.controlName"
        [multiselect]="formElementRef._eoFormElement.multiselect" [multiline]="formElementRef._eoFormElement.multiline"
        [classification]="formElementRef._eoFormElement.classification" [regex]="formElementRef._eoFormElement.regex"
        [size]="formElementRef._eoFormElement.size" [readonly]="formElementRef._eoFormElement.readonly"
        [minLength]="formElementRef._eoFormElement.minlen" [maxLength]="formElementRef._eoFormElement.maxlen">
      </yuv-string>
    </yuv-form-input>

    <!-- BOOLEAN -->
    <yuv-form-input *ngSwitchCase="'boolean'" [tag]="tag" class="checkbox" [label]="formElementRef._eoFormElement.label"
      [isNull]="isNull" [skipToggle]="skipToggle || situation !== 'SEARCH'"
      [required]="formElementRef._eoFormElement.required" (onToggleLabel)="labelToggled($event)"
      [invalid]="formElementRef.invalid">
      <yuv-checkbox [formControlName]="element._eoFormControlWrapper.controlName"
        [readonly]="formElementRef._eoFormElement.readonly" [tristate]="true"></yuv-checkbox>
    </yuv-form-input>

    <!-- DATE -->
    <yuv-form-input *ngSwitchCase="'date'" [tag]="tag" [label]="formElementRef._eoFormElement.label" [isNull]="isNull"
      [skipToggle]="skipToggle || situation !== 'SEARCH'" (onToggleLabel)="labelToggled($event)"
      [required]="formElementRef._eoFormElement.required" [invalid]="formElementRef.invalid">
      <yuv-datetime [readonly]="formElementRef._eoFormElement.readonly" [withTime]="false"
        [pickerTitle]="formElementRef._eoFormElement.label"
        [formControlName]="element._eoFormControlWrapper.controlName"></yuv-datetime>
    </yuv-form-input>

    <!-- DATETIME -->
    <yuv-form-input *ngSwitchCase="'datetime'" [tag]="tag" [label]="formElementRef._eoFormElement.label"
      [isNull]="isNull" [skipToggle]="skipToggle || situation !== 'SEARCH'" (onToggleLabel)="labelToggled($event)"
      [required]="formElementRef._eoFormElement.required" [invalid]="formElementRef.invalid">
      <yuv-datetime [readonly]="formElementRef._eoFormElement.readonly" [withTime]="true"
        [pickerTitle]="formElementRef._eoFormElement.label"
        [formControlName]="element._eoFormControlWrapper.controlName"></yuv-datetime>
    </yuv-form-input>

    <!-- INTERGER -->
    <yuv-form-input *ngSwitchCase="'integer'" [tag]="tag" [label]="formElementRef._eoFormElement.label"
      [isNull]="isNull" [skipToggle]="skipToggle || situation !== 'SEARCH'" (onToggleLabel)="labelToggled($event)"
      [required]="formElementRef._eoFormElement.required" [invalid]="formElementRef.invalid">
      <yuv-number [readonly]="formElementRef._eoFormElement.readonly"
        [precision]="formElementRef._eoFormElement.precision" [scale]="0"
        [grouping]="formElementRef._eoFormElement.grouping"
        [min]="formElementRef._eoFormElement.min" [max]="formElementRef._eoFormElement.max"
        [formControlName]="element._eoFormControlWrapper.controlName">
      </yuv-number>
    </yuv-form-input>

    <!-- DECIMAL -->
    <yuv-form-input *ngSwitchCase="'decimal'" [tag]="tag" [label]="formElementRef._eoFormElement.label"
      [isNull]="isNull" [skipToggle]="skipToggle || situation !== 'SEARCH'" (onToggleLabel)="labelToggled($event)"
      [required]="formElementRef._eoFormElement.required" [invalid]="formElementRef.invalid">
      <yuv-number [readonly]="formElementRef._eoFormElement.readonly"
        [precision]="formElementRef._eoFormElement.precision" [scale]="formElementRef._eoFormElement.scale"
        [grouping]="formElementRef._eoFormElement.grouping" [pattern]="formElementRef._eoFormElement.pattern"
        [min]="formElementRef._eoFormElement.min" [max]="formElementRef._eoFormElement.max"
        [formControlName]="element._eoFormControlWrapper.controlName">
      </yuv-number>
    </yuv-form-input>

    <!-- print out the type if it's not matching anything -->
    <div *ngSwitchDefault>
      <b>{{ formElementRef._eoFormElement.type }}</b>
    </div>

    <!-- the fields description -->
    <div class="description" *ngIf="formElementRef._eoFormElement.description">
      {{ formElementRef._eoFormElement.description }}</div>

    <!-- error/validation messages -->
    <div class="err-msg" *ngIf="
        (situation !== 'SEARCH' && situation !== 'CREATE' && formElementRef.errors) ||
        ((situation === 'SEARCH' || situation === 'CREATE') && formElementRef.errors && (formElementRef.dirty || formElementRef.touched))
      ">
      <div *ngIf="formElementRef.errors.number">{{'yuv.framework.object-form-element.error.number' | translate}}</div>
      <div *ngIf="formElementRef.errors.precision">
        {{ 'yuv.framework.object-form-element.error.number.precision' | translate: formElementRef.errors.precision.params }}
      </div>
      <div *ngIf="formElementRef.errors.scale">
        {{ 'yuv.framework.object-form-element.error.number.scale' | translate: formElementRef.errors.scale.params }}
      </div>

      <div *ngIf="formElementRef.errors.regex || formElementRef.errors.pattern">
        {{'yuv.framework.object-form-element.error.string.regex.nomatch' | translate}}</div>
      <div *ngIf="formElementRef.errors.classificationemail">
        {{'yuv.framework.object-form-element.error.string.classification.email' | translate}}</div>
      <div *ngIf="formElementRef.errors.classificationurl">
        {{'yuv.framework.object-form-element.error.string.classification.url' | translate}}</div>
      <div *ngIf="formElementRef.errors.onlyWhitespaces">
        {{'yuv.framework.object-form-element.error.string.whitespaces' | translate}}
      </div>
      <div *ngIf="formElementRef.errors.datecontrol">
        {{'yuv.framework.object-form-element.error.date.invalid' | translate}}</div>
      <div *ngIf="formElementRef.errors.eoformScript">{{ formElementRef._eoFormElement.error.msg }}</div>
      <div *ngIf="formElementRef.errors.required">{{'yuv.framework.object-form-element.error.required' | translate}}
      </div>
      <div *ngIf="formElementRef.errors.maxlength">
        {{'yuv.framework.object-form-element.error.maxlength' | translate: ({ maxlength: formElementRef._eoFormElement.maxlen })}}
      </div>
      <div *ngIf="formElementRef.errors.minlength">
        {{'yuv.framework.object-form-element.error.minlength' | translate: ({ minlength: formElementRef._eoFormElement.minlen })}}
      </div>
      <div *ngIf="formElementRef.errors.minmax">
        {{'yuv.framework.object-form-element.error.minmax' | translate: ({ min: formElementRef._eoFormElement.min, max: formElementRef._eoFormElement.max })}}
      </div>
    </div>
  </div>
</div>
