<div class="object-form-edit" [ngClass]="{invalid: formState?.invalid === true}" [yuvBusyOverlay]="busy">

  <yuv-object-form [formOptions]="formOptions" *ngIf="formOptions" (statusChanged)="onFormStatusChanged($event)">
  </yuv-object-form>


  <ng-container *ngIf="combinedFormInput">
    <!-- FSOT add panel -->
    <div class="fsot">

      <ng-container *ngIf="fsot?.applicableTypes?.length">
        <button (click)="chooseFSOT(true)">{{'yuv.framework.object-form-edit.fsot.apply-type'|translate}}</button>
        <!-- popover for applying a new floating type -->
        <ng-template #tplFloatingTypePicker let-data let-popover="popover">
          <div *ngFor="let sot of fsot.applicableTypes" (click)="applyFSOT(sot, true, popover)">{{sot.label}}</div>
        </ng-template>
      </ng-container>

      <ng-container *ngIf="fsot?.applicableSOTs?.length">
        <button (click)="chooseFSOT()">{{'yuv.framework.object-form-edit.fsot.add-fsot'|translate}}</button>
        <!-- popover for adding a new floating secondary object type -->
        <ng-template #tplFloatingSOTypePicker let-data let-popover="popover">
          <div *ngFor="let sot of fsot.applicableSOTs" (click)="applyFSOT(sot, false, popover)">{{sot.label}}</div>
        </ng-template>
      </ng-container>

    </div>

    <yuv-combined-object-form (sotRemove)="removeFSOT($event)" (statusChanged)="onFormStatusChanged($event)"
      [objectFormInput]="combinedFormInput">
    </yuv-combined-object-form>
  </ng-container>

  <div class="form-controls" [ngClass]="{disabled: controls.disabled}">

    <div class="err-msg" *ngIf="formState?.invalid" translate>yuv.framework.object-form-edit.invalid</div>

    <div class="buttons" yuvOfflineDisabled>
      <button class="secondary" (click)="reset()" [disabled]="controls.saving || controls.disabled"
        translate>yuv.framework.object-form-edit.reset</button>
      <button class="primary" [ngClass]="{spinner: controls.saving}"
        [disabled]="formState?.invalid || controls.saving || controls.disabled" (click)="save()"
        translate>yuv.framework.object-form-edit.save</button>
    </div>
  </div>
</div>