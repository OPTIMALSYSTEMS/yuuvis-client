<p-autoComplete
  [(ngModel)]="innerValue"
  #autocomplete
  [minLength]="autocompleteMinLength"
  (onSelect)="onSelect($event)"
  (completeMethod)="autocompleteFn($event)"
  (onUnselect)="onUnselect($event)"
  (onBlur)="onAutoCompleteBlur()"
  field="title"
  [suggestions]="autocompleteRes"
  [disabled]="readonly"
  [multiple]="true"
  [appendTo]="appendTo"
>
  <ng-template pTemplate="loadingicon"></ng-template>
  <!-- template for the selected items -->
  <ng-template let-item pTemplate="selectedItem">
    <span class="p-autocomplete-token-label">
      <ng-container *ngIf="item.type === 'role'; else tplUserIcon">
        <svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 20 20">
          <path
            d="M14.5 12q-.833 0-1.417-.583Q12.5 10.833 12.5 10q0-.833.583-1.417Q13.667 8 14.5 8q.833 0 1.417.583.583.584.583 1.417 0 .833-.583 1.417Q15.333 12 14.5 12ZM11 16v-1.104q0-.229.083-.427.084-.198.25-.344.667-.563 1.479-.844Q13.625 13 14.5 13t1.688.281q.812.281 1.479.844.166.146.25.344.083.198.083.427V16Zm-3-6q-1.25 0-2.125-.875T5 7q0-1.25.875-2.125T8 4q1.25 0 2.125.875T11 7q0 1.25-.875 2.125T8 10Zm0-3Zm-6 9v-1.917q0-.541.26-.989.261-.448.719-.719 1.146-.667 2.417-1.021Q6.667 11 8 11q1.083 0 2.135.24 1.053.239 2.053.698-.48.145-.896.395-.417.25-.813.542-.604-.167-1.229-.271Q8.625 12.5 8 12.5q-1.125 0-2.208.292-1.084.291-2.063.875-.104.062-.167.177-.062.114-.062.239v.417h6V16Zm6-1.5Zm0-6q.625 0 1.062-.438Q9.5 7.625 9.5 7t-.438-1.062Q8.625 5.5 8 5.5t-1.062.438Q6.5 6.375 6.5 7t.438 1.062Q7.375 8.5 8 8.5Z"
          />
        </svg> </ng-container
      >{{ item.title }}
    </span>
  </ng-template>
</p-autoComplete>

<yuv-icon
  class="classify"
  [title]="'yuv.framework.form.organization.classify.icon.title' | translate"
  icon="{{ multiselect ? 'organizationMulti' : 'organization' }}"
></yuv-icon>

<ng-template #tplUserIcon>
  <svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 20 20">
    <path
      d="M10 10q-1.25 0-2.125-.875T7 7q0-1.25.875-2.125T10 4q1.25 0 2.125.875T13 7q0 1.25-.875 2.125T10 10Zm-6 6v-2q0-.479.26-.906.261-.427.719-.719 1.146-.667 2.427-1.021Q8.688 11 10 11q1.312 0 2.594.354 1.281.354 2.427 1.021.458.271.719.708.26.438.26.917v2Zm1.5-1.5h9V14q0-.104-.062-.198-.063-.094-.167-.135-.959-.584-2.042-.875Q11.146 12.5 10 12.5q-1.146 0-2.229.292-1.083.291-2.042.875-.104.083-.167.156-.062.073-.062.177Zm4.5-6q.625 0 1.062-.438Q11.5 7.625 11.5 7t-.438-1.062Q10.625 5.5 10 5.5t-1.062.438Q8.5 6.375 8.5 7t.438 1.062Q9.375 8.5 10 8.5ZM10 7Zm0 7.5Z"
    />
  </svg>
</ng-template>
