<div class="count" *ngIf="resultCount !== null">{{resultCount}}</div>
<!-- <div class="count no-results" *ngIf="!searchHasResults && searchForm.get('term').value" (click)="executeSearch()"> -->
<div class="count no-results" *ngIf="resultCount === 0">
  <span class="label" translate>yuv.framework.quick-search.result.empty</span>
</div>

<div class="search-box" [ngClass]="{invalid: invalidTerm, extrasEnabled: formFields.length, busy: busy}">

  <div class="busy-bar"></div>

  <form [formGroup]="searchForm">

    <div class="main">

      <button type="button" class="type-select" #typeSelectTrigger (click)="showObjectTypePicker()">
        <div class="label">{{objectTypeSelectLabel}}</div>
        <yuv-icon [svg]="icons.arrowDown"></yuv-icon>
      </button>

      <div class="input">
        <input #termEl [placeholder]="'yuv.framework.quick-search.term.placeholder'|translate" formControlName="term">
      </div>

      <button type="button" class="field-select" #fieldSelectTrigger (click)="showObjectTypeFieldPicker()"
        *ngIf="availableObjectTypeFields?.length">
        <yuv-icon [svg]="icons.addCircle"></yuv-icon>
      </button>
    </div>
  </form>

  <!-- form elements from object type fields -->
  <form class="extras" #extrasForm [formGroup]="searchFieldsForm" *ngIf="formFields.length">
    <ng-container *ngFor="let key of searchFieldsForm?.controls | keys">

      <div class="fe-chip">
        <yuv-object-form-element [element]="searchFieldsForm.controls[key]"></yuv-object-form-element>
        <button (click)="removeFieldEntry(key)">
          <yuv-icon [svg]="icons.clear"></yuv-icon>
        </button>
      </div>
      <!-- <button>{{operator === 'AND' ? 'AND' : 'OR'}}</button> -->
    </ng-container>


  </form>
  <!-- </div> -->

  <div class="buttons">
    <button type="button" (click)="reset()">{{'yuv.framework.quick-search.reset'|translate}}</button>
    <button class="primary" (click)="executeSearch()">{{'yuv.framework.quick-search.submit'|translate}}</button>
  </div>

</div>

<ng-template #tplValuePicker let-data let-popover="popover">
  <yuv-value-picker [items]="data.items" [selectedItemIds]="data.selected" [multiselect]="data.multiselect"
    (select)="onValuePickerResult(data.type, $event, popover)">
  </yuv-value-picker>
</ng-template>