<yuv-panel [title]="context.title" [description]="context.description">
  <div class="header-icon" [innerHtml]="contextIcon | safeHtml"></div>

  <yuv-action-menu-bar class="actions" yuvOfflineDisabled>
    <yuv-icon class="config" icon="settings" (click)="showColumnConfigEditor()" *ngIf="activeSearchResult?.viewMode === 'standard'"> </yuv-icon>
    <yuv-icon (click)="refresh()" [title]="'yuv.framework.list.refresh' | translate" class="button refresh-button" [icon]="'refresh'"></yuv-icon>
    <yuv-icon class="details" icon="edit" (click)="select([context.id])"></yuv-icon>
  </yuv-action-menu-bar>

  <p-tabView class="content" [activeIndex]="activeTabIndex" (onChange)="onTabChange($event)">
    <p-tabPanel [id]="'children'" [header]="'yuv.client.state.object.tabs.children.title' | translate">
      <ng-template pTemplate="content">
        <!-- context children search result -->
        <yuv-search-result
          class="content"
          [query]="contextChildrenQuery"
          [preSelectItems]="preSelectItems"
          applyColumnConfig="true"
          [layoutOptionsKey]="_layoutOptionsKeys.children"
          (itemsSelected)="select($event)"
        >
        </yuv-search-result>
      </ng-template>
    </p-tabPanel>

    <p-tabPanel [id]="'recent'" [disabled]="!recentItemsQuery" [header]="'yuv.client.state.object.tabs.recent.title' | translate">
      <ng-template pTemplate="content">
        <!-- recent item search result -->
        <yuv-search-result
          class="content"
          [query]="recentItemsQuery"
          [preSelectItems]="preSelectItems"
          applyColumnConfig="true"
          [layoutOptionsKey]="_layoutOptionsKeys.recent"
          (itemsSelected)="select($event)"
        >
        </yuv-search-result>
      </ng-template>
    </p-tabPanel>

    <p-tabPanel [id]="'search-result'" [disabled]="!contextSearchQuery" [header]="'yuv.client.state.object.tabs.search-result.title' | translate">
      <ng-template pTemplate="content">
        <!-- context search result -->
        <yuv-search-result
          class="content"
          [query]="contextSearchQuery"
          [preSelectItems]="preSelectItems"
          [layoutOptionsKey]="_layoutOptionsKeys.search"
          applyColumnConfig="true"
          (itemsSelected)="select($event)"
        >
        </yuv-search-result>
      </ng-template>
    </p-tabPanel>
  </p-tabView>
</yuv-panel>

<!-- column config editor overlay -->
<ng-template #tplColumnConfigPicker let-data let-popover="popover">
  <yuv-column-config [options]="data" (configSaved)="columnConfigChanged($event, popover)"></yuv-column-config>
</ng-template>
