<yuv-panel *ngIf="dmsObject; else empty" class="object-details" [title]="dmsObject.title"
  (yuvFileDrop)="onFileDropped($event)"
  [yuvFileDropOptions]="{ disabled: (disableFileDrop || dmsObject.contentStreamAllowed === 'notallowed'), label: fileDropLabel }"
  [description]="dmsObject.description" [yuvBusyOverlay]="busy">

  <div class="header-icon" [innerHtml]="objectIcon | safeHtml"></div>

  <yuv-action-menu-bar class="actions" yuvOfflineDisabled>
    <yuv-icon (click)="refreshDetails()" [title]="'yuv.framework.list.refresh' | translate"
      class="button refresh-button" [icon]="'refresh'"></yuv-icon>
    <yuv-icon (click)="openActionMenu()" [title]="'yuv.framework.object-details.tooltip.icon.actions' | translate"
      class="button actions-button" [icon]="'kebap'"></yuv-icon>
  </yuv-action-menu-bar>

  <yuv-action-menu-bar class="status" [className]="'status'">
    <!--   <a class="content-link">
      <span translate>eo.object.contentlink</span>
    </a>
    <yuv-icon class="subscription-icon" [icon]="'subscription'"></yuv-icon>
    <yuv-icon class="resubmission-icon" [icon]="'resubmission'"></yuv-icon>
    <yuv-icon class="lock" [icon]="'lock'"></yuv-icon>
    <yuv-icon class="finalized-icon" [icon]="'finalized'"></yuv-icon> -->
  </yuv-action-menu-bar>

  <yuv-responsive-tab-container #tabContainer class="content" [layoutOptionsKey]="layoutOptionsKey"
    [pluginPanels]="[viewPanels, externalPanels]">

    <ng-container *ngFor="let templateID of panelOrder" [ngTemplateOutlet]="this[templateID]"></ng-container>

    <ng-container *ngTemplateOutlet="content"></ng-container>

  </yuv-responsive-tab-container>
</yuv-panel>
<yuv-action-menu [(visible)]="actionMenuVisible" [selection]="actionMenuSelection"> </yuv-action-menu>

<ng-template #empty>
  <yuv-context-error *ngIf="contextError" [contextError]="contextError"></yuv-context-error>
  <yuv-empty *ngIf="!contextError" [icon]="nofileIcon"></yuv-empty>
</ng-template>


<!-- PANELS -->
<ng-template #summary>
  <p-tabPanel [id]="'summary'" [header]="'yuv.framework.object-details.tabs.summary.title' | translate"
    [headerStyleClass]="'summary'">
    <ng-template pTemplate="content">
      <yuv-summary [dmsObject]="dmsObject" [versionLinkTemplate]="versionLinkTemplate"
        [showExtrasSection]="userIsAdmin">
      </yuv-summary>
    </ng-template>
  </p-tabPanel>
</ng-template>

<ng-template #indexdata>
  <p-tabPanel [id]="'indexdata'" [header]="'yuv.framework.object-details.tabs.indexdata.title' | translate"
    [headerStyleClass]="'indexdata'">
    <ng-template pTemplate="content">
      <yuv-object-form-edit [dmsObject]="dmsObject" (indexDataSaved)="onIndexdataSaved($event)">
      </yuv-object-form-edit>
    </ng-template>
  </p-tabPanel>
</ng-template>

<ng-template #preview>
  <p-tabPanel [id]="'preview'" [header]="'yuv.framework.object-details.tabs.content.title' | translate"
    [headerStyleClass]="'preview'">
    <ng-template pTemplate="content" *ngIf="!undockWinActive; else loadPreview">
      <yuv-content-preview [dmsObject]="dmsObject" [searchTerm]="searchTerm"></yuv-content-preview>
    </ng-template>
    <ng-template #loadPreview>
      <yuv-content-preview [dmsObject]="dmsObject" [searchTerm]="searchTerm"></yuv-content-preview>
    </ng-template>
  </p-tabPanel>
</ng-template>


<ng-template #history>
  <p-tabPanel [id]="'history'" [header]="'yuv.framework.object-details.tabs.history.title' | translate"
    [headerStyleClass]="'history'">
    <ng-template pTemplate="content">
      <yuv-audit [objectID]="objectId" [versionLinkTemplate]="versionLinkTemplate"></yuv-audit>
    </ng-template>
  </p-tabPanel>
</ng-template>

<ng-template #content>
  <ng-content></ng-content>
</ng-template>